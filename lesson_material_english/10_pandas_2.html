
<!DOCTYPE html>


<html lang="de" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>19. Pandas - Part 2 &#8212; Introduction to Programming with Python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=91fba89f"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/translations.js?v=79cc9f76"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'lesson_material_english/10_pandas_2';</script>
    <link rel="index" title="Stichwortverzeichnis" href="../genindex.html" />
    <link rel="search" title="Suche" href="../search.html" />
    <link rel="next" title="20. Data visualization with Python" href="12_data_visualization.html" />
    <link rel="prev" title="18. Pandas!" href="09_pandas.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="de"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="cover.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/cover_logo_mini.png" class="logo__image only-light" alt="Introduction to Programming with Python - Home"/>
    <script>document.write(`<img src="../_static/cover_logo_mini.png" class="logo__image only-dark" alt="Introduction to Programming with Python - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Suche" aria-label="Suche" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Suche</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="cover.html">
                    Introduction to Python for Data Science
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="00_introduction.html">1. Programming for Data Science and Artificial Intelligence</a></li>
<li class="toctree-l1"><a class="reference internal" href="01_first_steps.html">2. Getting Started with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="01_data_types.html">3. Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="01_variables.html">4. Variables</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Functions and Modules</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="02_control_structures_conditions_loop.html">5. Control Structures and Conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_functions.html">6. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_import_libraries_modules.html">7. Importing from Libraries/Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_special_functions.html">8. Special Functions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Types &amp; String Handling</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="04_datatypes_2.html">9. Data Types II</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_string_handling.html">10. String Handling</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Error Handling und Best Practices I</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="05_error_handling.html">11. Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_one_step_back-best_practices.html">12. Clean Code and Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_open_files.html">13. Reading and Writing Files</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Of Classes and Objects</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="06_classes_objects.html">14. Object-Oriented Programming - Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_classes_objects_2.html">15. Object-oriented programming in Python</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Working with Numerical Data - Numpy</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="08_numpy.html">16. Numerical Data in Python with NumPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="09_numpy_2.html">17. Numerical Data in Python with NumPy - Part 2</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">First Steps towards Data Science</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="09_pandas.html">18. Pandas!</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">19. Pandas - Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="12_data_visualization.html">20. Data visualization with Python</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">A few missing things</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="10_debugging.html">21. Python Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="14_generators.html">22. Generators / Iterators</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Source Code and Contributions</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="github.html">Source Code on GitHub</a></li>

</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/florian-huber/python-introduction" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Quell-Repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/florian-huber/python-introduction/issues/new?title=Issue%20on%20page%20%2Flesson_material_english/10_pandas_2.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Öffnen Sie ein Problem"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Laden Sie diese Seite herunter">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/lesson_material_english/10_pandas_2.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Quelldatei herunterladen"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="In PDF drucken"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Vollbildmodus"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Suche" aria-label="Suche" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Pandas - Part 2</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Inhalt </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-cleaning">19.1. Data cleaning</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#and-now-what-to-do-with-nans">19.1.1. And now? What to do with NaNs?</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#replacing-nan">19.1.1.1. Replacing NaN</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#important">19.1.2. Important:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#digging-a-bit-deeper">19.2. Digging a bit deeper…</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#groupby">19.3. Groupby</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting">19.4. Plotting</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#intermezzo-data-visualization">19.4.1. Intermezzo: data visualization</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-few-more-examples-in-the-jupyter-notebook-of-the-lecture">19.4.2. A few more examples in the Jupyter Notebook of the lecture</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pandas-is-huge">19.5. Pandas is huge!</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="pandas-part-2">
<h1><span class="section-number">19. </span>Pandas - Part 2<a class="headerlink" href="#pandas-part-2" title="Link to this heading">#</a></h1>
<p>In the first part, we saw how to read a.csv file and explore basic properties. Here, we will take it a few steps further in dealing with (complex) data sets.</p>
<section id="data-cleaning">
<h2><span class="section-number">19.1. </span>Data cleaning<a class="headerlink" href="#data-cleaning" title="Link to this heading">#</a></h2>
<p>Data cleaning involves rearranging and processing data with the aim of making it more useful for subsequent analysis. We already took a step in this direction last time by reducing the number of columns to the most important ones.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="err">“</span><span class="n">my_data_folder</span><span class="err">”</span><span class="p">,</span> <span class="s1">&#39;pokemon.csv&#39;</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="err">“</span><span class="p">,</span><span class="err">”</span><span class="p">)</span>

<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;type1&#39;</span><span class="p">,</span> <span class="s1">&#39;type2&#39;</span><span class="p">,</span> <span class="s1">&#39;speed&#39;</span><span class="p">,</span> <span class="s1">&#39;abilities&#39;</span><span class="p">,</span><span class="s1">&#39;attack&#39;</span><span class="p">,</span>
    <span class="s1">&#39;defense&#39;</span><span class="p">,</span> <span class="s1">&#39;height_m&#39;</span><span class="p">,</span> <span class="s1">&#39;hp&#39;</span><span class="p">,</span> <span class="s1">&#39;weight_kg&#39;</span><span class="p">,</span>
    <span class="s1">&#39;generation&#39;</span><span class="p">,</span> <span class="s1">&#39;is_legendary&#39;</span>
<span class="p">]</span>
<span class="n">data_selected</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">data_selected.info()</span></code> we can see that some columns do not contain the required 801 entries.</p>
<p>If we look at the table (e.g. with <code class="docutils literal notranslate"><span class="pre">data_selected.head()</span></code>), we see that some entries are called <code class="docutils literal notranslate"><span class="pre">NaN</span></code>. This stands for Not-a-Number and is the Numpy format for missing/unknown entries.</p>
<p>Pandas offers a range of options for dealing with such missing values. NaNs also exist in Numpy, but we have not explicitly looked at them there. In Numpy, such an entry can be created as <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p>
<p>In Pandas, these can be queried using <code class="docutils literal notranslate"><span class="pre">.isnull()</span></code> or <code class="docutils literal notranslate"><span class="pre">isna()</span></code>, where <code class="docutils literal notranslate"><span class="pre">.any()</span></code> indicates that the value should be True if at least one element is a NaN. Both methods do the same here, although “isnull” is perhaps confusing because it does not indicate whether a value is zero, but only whether a value is not present (NaN –&gt; True).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">data_selected</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">())</span>

<span class="nb">print</span><span class="p">(</span><span class="n">data_selected</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">())</span>
</pre></div>
</div>
<p>We can now display all columns in which individual values are missing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_selected</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()]]</span>
</pre></div>
</div>
<section id="and-now-what-to-do-with-nans">
<h3><span class="section-number">19.1.1. </span>And now? What to do with NaNs?<a class="headerlink" href="#and-now-what-to-do-with-nans" title="Link to this heading">#</a></h3>
<p>Depending on what we want to do with our data, there are different strategies for dealing with missing values. In many cases, we can simply ignore them. If we calculate mean values (<code class="docutils literal notranslate"><span class="pre">.mean()</span></code>) or similar, these values are automatically not counted.</p>
<p>In other cases, we may want to replace the values, e.g. with “0”. But be careful! After that, these values will be counted when calculating sums or averages.</p>
<section id="replacing-nan">
<h4><span class="section-number">19.1.1.1. </span>Replacing NaN<a class="headerlink" href="#replacing-nan" title="Link to this heading">#</a></h4>
<p>In Pandas, you can replace values with <code class="docutils literal notranslate"><span class="pre">.fillna()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_selected</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>But we can also use strings or other formats:</p>
<p>python
data_selected.fillna(“unknown”).head()</p>
<p>If NaN cannot simply be replaced and should not occur in the further steps, then either the corresponding columns or rows must be removed from the table. This can be done in Pandas with <code class="docutils literal notranslate"><span class="pre">.dropna()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_selected</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>Or to remove all columns with NaNs:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_selected</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="important">
<h3><span class="section-number">19.1.2. </span>Important:<a class="headerlink" href="#important" title="Link to this heading">#</a></h3>
<p>In Python, there are two options for methods that want to modify “their” object:</p>
<ol class="arabic simple">
<li><p>The object remains unchanged and a modified copy is output via <code class="docutils literal notranslate"><span class="pre">return</span></code>.</p></li>
<li><p>The object itself is modified.</p></li>
</ol>
<p>In the case of Pandas, (1) usually takes place, see also https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#indexing-view-versus-copy.</p>
<p>This means that if we want to receive a modified DataFrame, we have to create it with <code class="docutils literal notranslate"><span class="pre">=</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_na_removed</span> <span class="o">=</span> <span class="n">data_selected</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">data_na_removed</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="digging-a-bit-deeper">
<h2><span class="section-number">19.2. </span>Digging a bit deeper…<a class="headerlink" href="#digging-a-bit-deeper" title="Link to this heading">#</a></h2>
<p>Let’s take the analysis of the data a step further. What if we want to know more about individual groups?</p>
<p>We can use masks to address specific questions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mask</span> <span class="o">=</span> <span class="n">data_selected</span><span class="p">[</span><span class="err">“</span><span class="n">type1</span><span class="err">”</span><span class="p">]</span> <span class="o">==</span> <span class="err">“</span><span class="n">bug</span><span class="err">”</span>
<span class="n">data_selected</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>We can also use such masks to query properties about individual groups:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_selected</span><span class="p">[</span><span class="n">mask</span><span class="p">][</span><span class="err">“</span><span class="n">weight_kg</span><span class="err">”</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
<p>In principle, this works quite well and does what it is supposed to do. But (of course) Pandas also has a function for this that makes it even easier: groupby().</p>
</section>
<section id="groupby">
<h2><span class="section-number">19.3. </span>Groupby<a class="headerlink" href="#groupby" title="Link to this heading">#</a></h2>
<p>Pandas <code class="docutils literal notranslate"><span class="pre">groupby</span></code> (see <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html">Pandas documentation</a>).</p>
<p>With grouby, all entries with certain categories can be summarized in Pandas. This makes it easy to quickly compare many properties.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_selected</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="err">“</span><span class="n">type1</span><span class="err">”</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
<p>Here the entries are sorted alphabetically by “type1”. To change the sorting, we simply add a <code class="docutils literal notranslate"><span class="pre">sort_values()</span></code> to sort by the desired column:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_selected</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="err">“</span><span class="n">type1</span><span class="err">”</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="err">“</span><span class="n">speed</span><span class="err">”</span><span class="p">)</span>
</pre></div>
</div>
<p>Groupby can also be used to count the number of elements in the respective groups:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_selected</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="err">“</span><span class="n">type1</span><span class="err">”</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
<p>It is even possible to combine multiple groupby actions to create groups and subgroups:</p>
<p>python
data_selected.groupby([“type1”, “is_legendary”]).mean()</p>
<p>This allows us to see what the average values are for a pokemon of a certain type, depending on whether it is “legendary” or not.</p>
</section>
<section id="plotting">
<h2><span class="section-number">19.4. </span>Plotting<a class="headerlink" href="#plotting" title="Link to this heading">#</a></h2>
<p>Finally, a few short plotting examples.</p>
<p>Since we just used <code class="docutils literal notranslate"><span class="pre">groupby</span></code>, we can also use this to create a plot. Incidentally, “stacked=True” means that the different bars should be attached to each other.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="err">“</span><span class="n">attack</span><span class="err">”</span><span class="p">,</span> <span class="err">“</span><span class="n">defense</span><span class="err">”</span><span class="p">,</span> <span class="err">“</span><span class="n">hp</span><span class="err">”</span><span class="p">,</span> <span class="err">“</span><span class="n">speed</span><span class="err">”</span><span class="p">,</span> <span class="err">“</span><span class="n">weight_kg</span><span class="err">”</span><span class="p">]</span>
<span class="n">data_selected</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="err">“</span><span class="n">type1</span><span class="err">”</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="n">cols</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>There are nicer plots, but at least we can quickly see that the “weight_kg” entry in particular depends very much on the respective type1 group! So let’s have another plot for it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_selected</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="err">“</span><span class="n">type1</span><span class="err">”</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="err">“</span><span class="n">weight_kg</span><span class="err">”</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">()</span>
</pre></div>
</div>
<section id="intermezzo-data-visualization">
<h3><span class="section-number">19.4.1. </span>Intermezzo: data visualization<a class="headerlink" href="#intermezzo-data-visualization" title="Link to this heading">#</a></h3>
<p>Why is the plot up here pretty bad?</p>
<p>–&gt; The order makes it <strong>very</strong> confusing! Imagine I ask which type is at position 3, 4, or 5…</p>
<p>The axis label for the x-axis is missing.</p>
<p>In general: Pandas plots with the help of <a class="reference external" href="https://matplotlib.org/"><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></a>. For more elaborate graphics and customizations, the plots are therefore also programmed with matplotlib. But Pandas just gives you quick access to explore different plots.</p>
<p>Simple adjustments can also be made quite well with Pandas, or matplotlib commands can be combined with Pandas.</p>
<p>Therefore, here is another attempt:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">data_selected</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="err">“</span><span class="n">type1</span><span class="err">”</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="err">“</span><span class="n">weight_kg</span><span class="err">”</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="err">“</span><span class="n">weight</span> <span class="p">[</span><span class="n">kg</span><span class="p">]</span><span class="err">”</span><span class="p">)</span>
</pre></div>
</div>
<p>With Pandas, such calls quickly become very long and complicated because more and more functions/methods can be added one after the other. To make it a little clearer, you can also work with intermediate steps!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_groupby_type</span> <span class="o">=</span> <span class="n">data_selected</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="err">“</span><span class="n">type1</span><span class="err">”</span><span class="p">)</span>
<span class="n">data_mean_weight</span> <span class="o">=</span> <span class="n">data_groupby_type</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="err">“</span><span class="n">weight_kg</span><span class="err">”</span><span class="p">]</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">data_mean_weight</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="err">“</span><span class="n">weight</span> <span class="p">[</span><span class="n">kg</span><span class="p">]</span><span class="err">”</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="a-few-more-examples-in-the-jupyter-notebook-of-the-lecture">
<h3><span class="section-number">19.4.2. </span>A few more examples in the Jupyter Notebook of the lecture<a class="headerlink" href="#a-few-more-examples-in-the-jupyter-notebook-of-the-lecture" title="Link to this heading">#</a></h3>
<p>… moving stuff to jupyter notebooks (soon)</p>
</section>
</section>
<section id="pandas-is-huge">
<h2><span class="section-number">19.5. </span>Pandas is huge!<a class="headerlink" href="#pandas-is-huge" title="Link to this heading">#</a></h2>
<p>Finally, we would like to point out that we will not be able to cover the full range of Pandas in 2-3, or even 4-5 lectures. So the main thing is that you familiarize yourself with how to use Pandas and DataFrames and how to perform simple operations with them (e.g. slicing, sorting). For everything else, you can always check forums or the Pandas documentation to see if there is already a suitable Pandas method for your specific question:</p>
<p>https://pandas.pydata.org/pandas-docs/stable/reference/frame.html</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./lesson_material_english"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="09_pandas.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">zurück</p>
        <p class="prev-next-title"><span class="section-number">18. </span>Pandas!</p>
      </div>
    </a>
    <a class="right-next"
       href="12_data_visualization.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">weiter</p>
        <p class="prev-next-title"><span class="section-number">20. </span>Data visualization with Python</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Inhalt
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-cleaning">19.1. Data cleaning</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#and-now-what-to-do-with-nans">19.1.1. And now? What to do with NaNs?</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#replacing-nan">19.1.1.1. Replacing NaN</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#important">19.1.2. Important:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#digging-a-bit-deeper">19.2. Digging a bit deeper…</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#groupby">19.3. Groupby</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting">19.4. Plotting</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#intermezzo-data-visualization">19.4.1. Intermezzo: data visualization</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-few-more-examples-in-the-jupyter-notebook-of-the-lecture">19.4.2. A few more examples in the Jupyter Notebook of the lecture</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pandas-is-huge">19.5. Pandas is huge!</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Durch Florian Huber
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>